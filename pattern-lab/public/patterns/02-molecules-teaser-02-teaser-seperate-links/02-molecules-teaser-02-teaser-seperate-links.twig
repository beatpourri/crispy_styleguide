{#
/**
 *** Available variables:
 * wrapper - "div, span, ..." - default: no wrapper
 * wrapper_classes - classes for the wrapper
 * teaser_prefix
 * teaser_suffix
 ** IMG - see: components/_patterns/01-atoms/04-images/00-image/image-figure.twig
 * img_src
 * img_alt
 * link_url
 * figcaption_text
 * image_element_class
 * image_modifiers
 * img_prefix
 * img_suffix
 ** TITLE
 * heading_level
 * heading_size
 * heading_modifiers
 * heading_content
 * heading_url
 * title_prefix
 * title_suffix
 *
 * Usage:
 *
 * {% include "@molecules/teaser/01-teaser.twig" %}
 */
#}
{% set contenttyp = contenttyp|default('') %}
{% set viewmode = viewmode|default('') %}

{% if wrapper_classes %}
    {% set wrapper_class %}
    class="{{ wrapper_classes }}"
    {% endset %}
{% endif %}

{% set wrapper_start %}
    {% if wrapper %}
        <{{ wrapper }} {{ wrapper_class }}>
    {% elseif wrapper_class %}
        {% set wrapper = 'div' %}
        <{{ wrapper }} {{ wrapper_class }}>
    {% endif %}
{% endset %}
{% set wrapper_end %}
    {% if  wrapper  %}
        </{{ wrapper }}>
    {% elseif wrapper_class %}
        </{{ wrapper }}>
    {% endif %}
{% endset %}

{% set image %}
    {% if img_src %}
        {{ img_prefix }}
        {%  include "@atoms/04-images/00-image/image-figure.twig"
        with {
        "img_src": img_src,
        "img_alt": img_alt,
        "image_url": link_url,
        "figcaption_text": figcaption_text,
        "image_element_class": contenttyp,
        "image_modifiers": viewmode,
        }
        %}
        {{ img_suffix }}
    {% endif %}
{% endset %}
{% if sub_title %}
    {% set ifsubheading = "no-bottom" %}
{% endif %}
{% set heading %}
    {% if title %}
        {{ title_prefix }}
        {% include "@atoms/00-headings/01-heading.twig"
        with {
        "heading_level": 2,
        "heading_size": 'large',
        "heading_modifiers": [contenttyp, ifsubheading],
        "heading_content": title,
        "heading_url": link_url,
        }
        %}
        {{ title_suffix }}
    {% endif %}
{% endset %}
{% set sub_heading %}
    {% if sub_title %}
        {{ title_prefix }}
        {% include "@atoms/00-headings/01-heading.twig"
        with {
        "heading_level": 3,
        "heading_size": 'medium',
        "heading_modifiers": [contenttyp, 'subtitle'],
        "heading_content": sub_title,
        "heading_url": link_url,
        }
        %}
        {{ title_suffix }}
    {% endif %}
{% endset %}

{% set teaser_text %}
    {% if body_teaser %}
        {% include "@atoms/01-text/text/01-paragraph.twig" with {
        "paragraph_content": body_teaser,
        "paragraph_base_class": paragraph_base_class,
        "paragraph_element_class": viewmode.1,
        "paragraph_modifiers": [contenttyp],
        } %}
    {% endif %}

{% endset %}
{% set read_more %}
    {% if link_url %}
        {% include "@molecules/links-with-icon/link-with-icon/readmore-link/readmore-link.twig"
        with {
        "link_url": link_url,
        }
        %}
    {% endif %}
{% endset %}


{% spaceless %}
    {{ wrapper_start }}
        {{ teaser_prefix|raw }}
            {{ image }}
            {{ heading }}
            {{ sub_heading }}
            {{ teaser_text }}
            {{ read_more }}
        {{ teaser_suffix|raw }}
    {{ wrapper_end }}
{% endspaceless %}
